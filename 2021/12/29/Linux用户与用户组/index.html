<!DOCTYPE html>
<html lang="zh-CN">
    <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/blog/images/favicon.ico" type="image/x-icon">
    
<link rel="stylesheet" href="/blog/css/common.css">

   
    <style>.preload{position:absolute;display:flex;flex-direction:column;align-items:center;justify-content:center;left:0;top:0;width:100%;height:100%;background-color:#000;z-index:100}.text{margin-bottom:10px;color:#00cff3;text-shadow:0 0 3px #00cff3;font-size:20px}.text span{display:inline-block}.dance{animation:dance .8s linear}.text span:nth-child(1){animation-delay:0s}.text span:nth-child(2){animation-delay:.1s}.text span:nth-child(3){animation-delay:.2s}.text span:nth-child(4){animation-delay:.3s}.text span:nth-child(5){animation-delay:.4s}.text span:nth-child(6){animation-delay:.5s}.text span:nth-child(7){animation-delay:.6s}.text span:nth-child(8){animation-delay:.7s}.text span:nth-child(9){animation-delay:.8s}.text span:nth-child(10){animation-delay:.9s}@keyframes dance{0%{transform:translateY(0)}50%{transform:translateY(-20px)}100%{transform:translateY(0)}}.loading{width:80%;max-width:260px;height:6px;background-color:#e1e4e8;border-radius:6px}.bar{display:flex;height:100%;background:linear-gradient(90deg,#ffd33d,#ea4aaa 10%,#b34bff 30%,#01feff 51%,#ffb33d 68%,#ea4aaa 85%,#b34bff);background-size:300% 100%;animation:bar 2s linear infinite}@keyframes bar{0%{background-position:100%}100%{background-position:0}}</style><body><div class="preload"><div class="text"><span>L</span> <span>o</span> <span>a</span> <span>d</span> <span>i</span> <span>n</span> <span>g</span> <span>.</span> <span>.</span> <span>.</span></div><div class="loading"><span class="bar"></span></div></div><script>let spans=document.querySelector('.text').querySelectorAll('span');const timer=setInterval(()=>{spans.forEach((item)=>{if(item.classList.contains('dance')){item.classList.remove('dance');}else{item.classList.add('dance');}})},1700);window.onload=function(){clearInterval(timer);document.querySelector('.preload').style="display:none;"}</script>
<title>SHIWIVI-文章</title>
<link rel="stylesheet" href="https://at.alicdn.com/t/font_2856826_bu73u0ahu7a.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css">

<link rel="stylesheet" href="/blog/css/index.css">
<link rel="stylesheet" href="/blog/css/article.css">


<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/blog/atom.xml" title="依一SHIWIVI" type="application/atom+xml">
</head>
<body>
<div class="navigation">
    <div class="card">
        <div class="head">
            <img src="/blog/images/head.jpg"  alt="头不见了.." title="狗">
        </div>
        <div class="card-text">
            <p>(ー`´ー)</p>
            <p>那不是bug，是彩蛋</p>
        </div> 
    </div>
    <ul class="label">
        
        <li><a href="/blog/index.html">首页</a></li>
        
        <li><a href="/blog/life">日常</a></li>
        
        <li><a href="/blog/record">一句</a></li>
        
        <li><a href="/blog/message">留言</a></li>
        
        <li><a href="/blog/about">关于</a></li>
          
    </ul>
        <ul class="tag">
            <li>#Document</li>
            <li>#Jquery</li>
            <li>#css</li>
            <li>#射频</li>
            <li>#5G通讯</li>
            <li>#PCB</li>
            <li>#shell</li>
            <li>#C</li>
            <li>#html</li>
            <li>#硬件</li>
            <li>#javaScript</li>
            <li>#防火墙</li>
            <li>#CentOS</li>
            <li>#Linux</li>
            <li>#python</li>
            <li>#XPpose</li>
        </ul>
<div class="rsstag"><a href="./atom.xml"><span class="iconfont icon-rss"></span>RSS订阅</a></div>
<div class="flower">
<?xml version="1.0" encoding="UTF-8"?>
<svg width="84.6px" height="70.5px" viewBox="0 0 254 212" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<title>窗</title>
<desc>Created with Sketch.</desc>
<defs></defs>
<g id="植物" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g id="Artboard" transform="translate(-885.000000, -503.000000)">
        <g id="植物-紫色盆" transform="translate(882.000000, 500.000000)">
            <ellipse id="Oval-12" fill="#B3B7C7" cx="140.5" cy="137" rx="39.5" ry="6"></ellipse>
            <g id="Group-5">
                <path d="M131.5,149 C137.746054,149 138.400559,136.953074 140.297813,118.503702 C141.504079,106.77367 149.145158,88.1140929 147,75 C142.297813,46.2539062 153.271934,32.5660626 150.170125,19.4282488 C148.031314,10.3692495 142.862042,3 131.5,3 C123.603887,3 113.698654,6.59314895 110.722909,11.2157433 C103.206874,22.8913341 114,46.5137576 114,75 C114,90.4435309 122.495151,106.751425 123.699377,118.476362 C125.595832,136.941172 125.250862,149 131.5,149 Z" id="Oval-11" fill="#BAC4F6"></path>
                <path d="M135.5,146.5 C132.598908,121.877878 130.965369,104.566553 130.599381,94.5660242 C130.050399,79.5652312 132.963841,77.0580598 132.164069,55.3464601 C131.630888,40.8720602 130.242865,30.4232402 128,24" id="Line-15" stroke="#FFFFFF" stroke-width="2" opacity="0.800892857" stroke-linecap="square"></path>
                <path d="M77.0442201,163.336077 C84.2239219,163.336077 101.067658,131.237823 101.067658,92.025606 C101.067658,52.8133888 90.9057581,-2.32627732 72.6560979,17.2440872 C50.0508064,41.4852946 69.5871262,36.5862429 74.0442201,63.8595149 C75.572858,73.2133576 77.0442201,94.5993942 77.0442201,104.613421 C77.0442201,143.825638 69.8645184,163.336077 77.0442201,163.336077 Z" id="Oval-9" fill="#BAC4F6" transform="translate(81.510722, 88.251316) rotate(-43.000000) translate(-81.510722, -88.251316) "></path>
                <path d="M42.5,50.5 C47.5132933,48.8699207 59.3816332,57.6317857 78.1050199,76.785595 C96.8284065,95.9394043 113.960067,116.844206 129.5,139.5" id="Line-17" stroke="#FFFFFF" stroke-width="2" stroke-linecap="square"></path>
                <path d="M155.281006,152.144255 C162.116643,152.144255 178.153197,121.584207 178.153197,84.2511084 C178.153197,72.6051871 184.354199,51.8242671 182.531201,39.8465879 C178.51025,13.4276595 163.058175,0.233079666 151.10317,13.0532528 C129.581164,36.1327785 143.297279,29.7382802 147.540781,55.7045685 C148.996164,64.6101585 153.500382,80.3852665 153.500382,89.9194035 C153.500382,127.252502 148.445368,152.144255 155.281006,152.144255 Z" id="Oval-9-Copy-2" fill="#E9EDFD" transform="translate(161.092971, 80.123972) scale(-1, 1) rotate(-20.000000) translate(-161.092971, -80.123972) "></path>
                <path d="M180.5,34.5 C181.290102,21.4892162 175.746138,28.9223292 163.868108,56.7993391 C157.546037,71.6368512 150.532373,85.3308057 144.827114,101.881203 C141.023608,112.914801 138.581237,128.787733 137.5,149.5" id="Line-20" stroke="#FFFFFF" stroke-width="2" stroke-linecap="square"></path>
                <path d="M60.3426107,183.894782 C69.2498271,183.894782 90.1463498,156.072081 90.1463498,122.083011 C90.1463498,88.0939419 67.5408019,29.4364067 54.8986583,57.2625442 C45.0326912,78.978146 51.0912584,74.0282851 56.6207779,97.6687014 C58.5172227,105.776593 67.8616068,124.363423 67.8616068,133.043561 C67.8616068,167.032631 51.4353942,183.894782 60.3426107,183.894782 Z" id="Oval-9-Copy" fill="#BAC4F6" transform="translate(69.895982, 116.944107) rotate(-71.000000) translate(-69.895982, -116.944107) "></path>
                <path d="M24.5,109.5 C22.4991751,103.669523 35.0833631,105.49608 62.2525641,114.979669 C79.4278854,120.974828 92.103247,119.378882 106.278649,126.191831 C111.777518,128.834684 120.517968,134.937407 132.5,144.5" id="Line-19" stroke="#FFFFFF" stroke-width="2" opacity="0.595424107" stroke-linecap="square"></path>
                <path d="M169.495543,159.559977 C178.40276,159.559977 199.299282,131.737276 199.299282,97.7482062 C199.299282,85.7856682 202.004463,66.329956 197.824033,53.1018748 C190.126639,28.745108 172.2443,14.8950801 164.051591,32.9277389 C154.185624,54.6433407 160.244191,49.6934798 165.77371,73.3338961 C167.670155,81.4417878 177.014539,100.028618 177.014539,108.708756 C177.014539,142.697825 160.588327,159.559977 169.495543,159.559977 Z" id="Oval-9-Copy-3" fill="#BAC4F6" transform="translate(179.479352, 92.134636) scale(-1, 1) rotate(-43.000000) translate(-179.479352, -92.134636) "></path>
                <path d="M213.5,60.5 C209.183273,60.8948914 201.740861,65.4428024 191.172763,74.1437328 C175.320617,87.1951284 177.797205,83.2393994 161.560337,103.262986 C150.735758,116.612043 142.715646,131.024381 137.5,146.5" id="Line-21" stroke="#FFFFFF" stroke-width="2" stroke-linecap="square"></path>
                <path d="M81.1425752,168.630026 C85.1025169,165.536181 98.2051544,147.96348 98.2051544,111.236918 C98.2051544,74.5103552 86.0176544,46.7369177 70.0176544,46.7369177 C54.0176544,46.7369177 59.5351666,70.3889964 66.8400325,93.0530589 C69.6371249,101.731312 78.9791535,122.814465 81.0032985,132.88325 C84.2653955,149.110029 78.6989273,170.539213 81.1425752,168.630026 Z" id="Oval-10" fill="#E9EDFD" transform="translate(78.936475, 107.743055) rotate(-52.000000) translate(-78.936475, -107.743055) "></path>
                <path d="M39.5,84.5 C46.5402399,84.832105 55.9862242,87.7506309 67.8379528,93.2555776 C85.6155457,101.512998 79.9127462,96.6348296 100.298442,112.739947 C113.888906,123.476691 125.956092,135.063376 136.5,147.5" id="Line-18" stroke="#FFFFFF" stroke-width="2" stroke-linecap="square"></path>
                <path d="M194.823347,177.534556 C197.785465,175.220296 209.085075,165.125173 213.530819,146.109724 C215.496552,137.701844 211.555235,124.000271 211.555235,111.853141 C211.555235,72.2337887 199.639103,43.8487815 182.378853,43.8487815 C165.118604,43.8487815 168.053621,58.2764613 175.933859,82.7256721 C183.814096,107.174883 191.693317,118.61017 193.876895,129.472028 C197.395933,146.976919 192.187224,179.594121 194.823347,177.534556 Z" id="Oval-10-Copy-2" fill="#E9EDFD" transform="translate(191.881132, 110.738214) scale(-1, 1) rotate(-52.000000) translate(-191.881132, -110.738214) "></path>
                <path d="M237.5,84.5 C231.839918,82.6252532 222.387737,84.7837206 209.143456,90.9754021 C189.277034,100.262925 198.344222,96.9653923 174.587666,113.911421 C158.749962,125.208774 147.387407,137.071634 140.5,149.5" id="Line-22" stroke="#FFFFFF" stroke-width="2" opacity="0.785044643" stroke-linecap="square"></path>
                <path d="M102.095097,154.049614 C106.979303,150.233654 123.140143,128.559423 123.140143,83.2607523 C123.140143,37.9620813 108.108037,3.70622602 88.3735811,3.70622602 C68.639125,3.70622602 75.4444439,32.8787829 84.4542911,60.8327171 C87.9042347,71.5365054 99.4267255,97.5405402 101.923313,109.959415 C105.946795,129.97358 99.0810936,156.404412 102.095097,154.049614 Z" id="Oval-10-Copy" fill="#E9EDFD" transform="translate(99.374086, 78.951409) rotate(-21.000000) translate(-99.374086, -78.951409) "></path>
                <path d="M70.5,27.5 C77.9697854,36.2141564 84.664658,44.2949462 90.5846178,51.7423694 C99.4645574,62.9135043 102.309139,65.8595669 108.078018,74.773869 C113.846897,83.6881711 108.232283,69.1486166 118.500716,94.8794382 C125.346337,112.033319 129.012765,128.573507 129.5,144.5" id="Line-16" stroke="#FFFFFF" stroke-width="2" stroke-linecap="square"></path>
                <path d="M193.001521,189.153265 C198.929205,189.153265 212.83568,162.652399 212.83568,130.278124 C212.83568,97.9038493 204.210737,49.7003434 189.378612,68.5372278 C174.540517,87.3816949 180.150684,86.5530431 183.830536,109.070321 C185.092606,116.793013 193.001521,132.403088 193.001521,140.670839 C193.001521,173.045114 187.073837,189.153265 193.001521,189.153265 Z" id="Oval-9-Copy-4" fill="#BAC4F6" transform="translate(196.248002, 126.727326) scale(-1, 1) rotate(-73.000000) translate(-196.248002, -126.727326) "></path>
                <path d="M234.5,116.5 C229.435614,115.997419 220.043174,117.148484 206.322678,119.953197 C185.741934,124.160265 185.201799,123.9696 168.145826,131.063968 C156.775178,135.793546 148.226569,140.93889 142.5,146.5" id="Line-23" stroke="#FFFFFF" stroke-width="2" opacity="0.733426339" stroke-linecap="square"></path>
            </g>
            <g id="Group-4" transform="translate(101.000000, 137.000000)">
                <path d="M0,0 C11.7955729,2 24.5052083,3 38.1289062,3 C51.7526042,3 65.3763021,2 79,0 L71.2109375,75.3409091 C61.9375,77.1136364 51.8945312,78 41.0820312,78 C30.2695313,78 19.4570312,77.1136364 8.64453125,75.3409091 L0,0 Z" id="Rectangle-9" fill="#FCDCCF"></path>
                <path d="M59.2621996,2.19791001 C63.6483775,1.86496527 70.2276443,1.1323286 79,0 L71.2109375,75.3409091 C63.3055851,76.5844933 57.2271178,77.3450382 52.9755357,77.6225437 L59.2621996,2.19791001 Z" id="Rectangle-9" fill="#ECC6B6"></path>
                <path d="M0,0 C10.9588352,1.33333333 23.3572727,2 37.1953125,2 C51.0333523,2 64.9682481,1.33333333 79,0 L76.7909585,21.3672948 L40.573652,23.0934676 L2.38711382,20.8047516 L0,0 Z" id="Rectangle-9" fill="#F3B096"></path>
            </g>
        </g>
    </g>
</g>
</svg>
</div>

</div>
<div class="menu-btn closed"> 
    <div class="menu-line"></div>
    <div class="menu-line"></div>
    <div class="menu-line"></div>
</div>
<div class="second-main">
    <div class="js-toc"></div>
    <div class="motto">
        <p> //sunny forever<br />
            while(life&lt;end){<br />
               love++;<br />
               beAwesome :)} </p>
     </div>
     <div class="second-content">
        <div class="article">
        <h1 class="title">Linux 运行级别与用户管理</h1>
        <div class="art_infor">
            <div><span><span class="iconfont icon-zishu-jzl"></span>字数：8062</span>
            <span><span class="iconfont icon-riqi"></span>写于：2021-12-29</span></div>
            <div><span><span class="iconfont icon-zuixinnew3"></span>最新更新：2021-12-29</span>
            <span><span class="iconfont icon-shijian"></span>阅读本文预计花费您24分钟</span></div>
        </div>
        <div class="art_content">
        <h3 id="Linux目录"><a href="#Linux目录" class="headerlink" title="Linux目录"></a>Linux目录</h3><h4 id="指令集"><a href="#指令集" class="headerlink" title="指令集"></a>指令集</h4><ul>
<li><strong>/bin</strong> &emsp; Binaries的缩写，存放普通用户可使用的系统命令,如:ls</li>
<li><strong>/sbin</strong>&emsp;Super user Binary的缩写，存放只有系统管理员才能使用的系统命令，如:shutdown、reboot</li>
<li><strong>/usr/bin</strong>&emsp;存放安装软件后，普通用户可以使用的软件命令，如:c++、make、wget等</li>
<li><strong>/usr/sbin</strong>&emsp;存放系统管理员用户安装使用的高级管理程序和系统服务程序，如:httpd、netconfig、tcpd等</li>
</ul>
<h4 id="系统文件"><a href="#系统文件" class="headerlink" title="系统文件"></a>系统文件</h4><ul>
<li><strong>/etc</strong>&emsp;Etcetera(其他)的缩写，这个目录用来存放所有系统管理所需要的<strong>配置文件</strong>和子目录</li>
<li><strong>/var</strong>存放一些经常被修改、扩充的文件，如各种日志文件</li>
<li>/boot&emsp;存放引导启动Linux时使用的核心文件,如镜像文件等</li>
<li>/sys&emsp; Linux2.6内核新增的文件系统sysfs，sysfs文件系统集成了3种文件系统的信息：针对进程信息的proc文件系统、针对设备的devfs文件系统以及针对伪终端的devpts文件系统</li>
<li>/lib&emsp;存放系统所需要的动态链接库(如C++库)，相当于windows的dll文件</li>
<li>/dev&emsp;Device的缩写, 将Linux主机的硬件以文件形式存储并提供访问，相当于Windows的设备管理器</li>
<li>/usr/src&emsp;内核源代码、说明文档等默认放置目录</li>
<li>/opt&emsp;默认为空，常用于安装额外软件</li>
<li>/proc&emsp;Processes(进程)的缩写，虚拟的目录，用于管理内存空间，是系统内存的映射，我们可以直接访问这个目录来获取系统信息。这个目录的内容不在硬盘上而是在内存里</li>
<li>/selinux&emsp;全称为security-enhanced linux，该目录是 Redhat/CentOS 所特有的目录，是Redhat/CentOS的安全子系统</li>
<li>/srv&emsp;service缩写，存放一些服务启动后需要提取的数据</li>
</ul>
<h4 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h4><ul>
<li><strong>/root</strong>&emsp;系统管理员的账号主目录</li>
<li><strong>/home</strong>&emsp;存放普通用户的相关文件，Linux会在home目录下为每一个用户生成一个以用户账号命名的目录</li>
<li><strong>/usr</strong>&emsp;Unix Software Resource(共享资源)的缩写,放置用户的应用程序和文件，类似于windows下的program files目录</li>
<li><strong>/usr/local</strong>&emsp;软件安装目录，一般通过源码编译安装方式安装的软件都会存放于该目录下</li>
<li>/usr/include&emsp;放置如c/c++等程序语言的头文件(header)与包含档(include)</li>
<li>/usr/lib&emsp;放置各应用软件的函式库、目标文件等，如果使用的是X86_64的Linux系统，则可能会生成/usr/lib64文件夹</li>
</ul>
<h4 id="外部文件"><a href="#外部文件" class="headerlink" title="外部文件"></a>外部文件</h4><ul>
<li><strong>/media</strong>&emsp;挂载U盘、光驱等设备的目录，类似于windows的其他设备</li>
<li>/mnt&emsp;让用户挂载其他的文件系统，如将Windows上的某个目录挂载在/mnt下，可用于共享文件等</li>
</ul>
<h4 id="临时文件"><a href="#临时文件" class="headerlink" title="临时文件"></a>临时文件</h4><ul>
<li>/lost+found&emsp;一般情况下为空目录，用于存放系统非法关机或者发生意外错误后，fsck(磁盘修复)过程修复的部分文件</li>
<li>/tmp&emsp;用于存放临时文件</li>
<li>/run&emsp;一个临时文件系统，存放存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。</li>
</ul>
<h3 id="系统运行级别"><a href="#系统运行级别" class="headerlink" title="系统运行级别"></a>系统运行级别</h3><p>Linux系统的开机过程流程为：加载BIOS，进入Boot Loader，加载系统内核，进行内核初始化，启动初始化进程init。</p>
<p>可以使用<span class="tips">init 运行级别</span>在系统运行级别之间切换，使用<span class="tips">runlevel</span>查询当前运行级别。</p>
<div class="table">

<table>
<thead>
<tr>
<th>运行级别(runlevel)</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>系统关机，禁止设置为系统默认运行级别</td>
</tr>
<tr>
<td>1</td>
<td>单用户状态，只启动系统核心，用于系统修复和维护</td>
</tr>
<tr>
<td>2</td>
<td>多用户状态，禁用NFS(网络文件系统)和网络服务，可用于停机维护</td>
</tr>
<tr>
<td>3</td>
<td>完全多用户状态，具有完整的功能</td>
</tr>
<tr>
<td>4</td>
<td>系统未使用，保留</td>
</tr>
<tr>
<td>5</td>
<td>GUI模式，桌面版Linux专属</td>
</tr>
<tr>
<td>6</td>
<td>系统重启，禁止设置为系统默认运行级别</td>
</tr>
<tr>
<td>emergency</td>
<td>用于系统救援</td>
</tr>
</tbody></table>
</div>

<p>在路径<span class="tips">/etc/rc.d</span>下存放有7个对应系统运行级别的目录<span class="tips">/rc0.d——rc6.d</span>，目录中列出了该运行级别下会启动/关闭的服务，init.d目录下存放有用户可以开机启动的脚本，对于以K(Kill)开头的文件，系统会关闭对应的服务，以S(Start)开头的文件，系统将启动对应的服务，并且启动/关闭次序为S/K之后的值。<span class="tips">rc.local</span>文件用于配置用户开机执行的命令，系统在启动后将自动执行该文件中的所有命令。</p>
<p>在一些旧版本的Linux中，/etc/rc.d路径下还含有<span class="tips">/etc/inittab</span>文件，文件中可以设置系统默认运行级别。centos7之后的系统将不再支持该方式修改默认级别，而使用target替代了sysvinit的运行级。</p>
<div class="table">

<table>
<thead>
<tr>
<th>Sys v init runlevel</th>
<th>systemd target</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>poweroff.target</td>
</tr>
<tr>
<td>1</td>
<td>rescue.target</td>
</tr>
<tr>
<td>2</td>
<td>multi-user.target</td>
</tr>
<tr>
<td>3</td>
<td>multi-user.target</td>
</tr>
<tr>
<td>4</td>
<td>multi-user.target</td>
</tr>
<tr>
<td>5</td>
<td>graphical.target</td>
</tr>
<tr>
<td>6</td>
<td>reboot.target</td>
</tr>
<tr>
<td>emergency</td>
<td>emergency.target</td>
</tr>
</tbody></table>
</div>
<div class="show">系统默认以启动runlevel3启动
# systemctl set-default multi-user.target
系统默认以启动runlevel5启动
# systemctl set-default graphical.target
查看当前运行级别
# systemctl get-default
</div>



<h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><p>许多主流Linux系统默认使用的Shell(终端程序)是Bash(GNU Bourne-Again Shell)解释器，可以通过<span class="tips">上下方向键</span>来调取之前执行过的Linux命令，可以使用<span class="tips">Tab键</span>来补全命令、参数或文件名。</p>
<p>常见的执行Linux命令的格式为</p>
<p><span class="strong">命令  [参数] [对象]</span></p>

<ul>
<li>个别命令不遵守该格式</li>
<li>有多个可选参数时，可以写在一起</li>
<li>参数可以用长格式(完整的参数名称)并使用”–”作为前缀，也可以用短格式（单个字母的缩写）使用”-“作为前缀。如：<span class="tips">–help</span>和<span class="tips"> -h</span>，但有时短格式与长格式表示的不是同一个参数，如：shutdown –help会显示shutdown命令的帮助信息,shutdown -h则为系统关机命令<div class="broadcast color-red">
<div class="iconfont icon-gantanhao"></div>
命令、参数与命令对象字母严格区分大小写</div></li>
</ul>
<h4 id="Linux的关闭与重启"><a href="#Linux的关闭与重启" class="headerlink" title="Linux的关闭与重启"></a>Linux的关闭与重启</h4><h5 id="1-sync-保存数据"><a href="#1-sync-保存数据" class="headerlink" title="1. sync 保存数据"></a>1. sync 保存数据</h5><p><span class="strong">sync</span>&emsp;将内存数据存储到磁盘，<span class="tips">关机或重启Linux前应当执行该命令防止数据丢失</span></p>
<h5 id="2-shutdown-命令-推荐使用"><a href="#2-shutdown-命令-推荐使用" class="headerlink" title="2.shutdown 命令(推荐使用)"></a>2.shutdown 命令(推荐使用)</h5><p>shutdown命令用于关闭/重启Linux，命令格式为</p>
<p> <span class="strong">   shutdown [选项] [时间] [警告消息]</span></p>
常用选项
<ul>
<li><span class="strong">-t 值</span>&emsp;设置在几秒后关机</li>
<li><span class="strong">-h</span>&emsp;关机</li>
<li><span class="strong">-r</span>&emsp;重启</li>
<li><span class="strong">-c</span>&emsp;取消已经设置的关机/重启命令</li>
<li>- m&emsp;强制杀死所有执行中的程序,然后关机(不调用init进程)</li>
<li>-k &emsp;不关机，仅把警告讯息传送给所有登录的用户</li>
<li>-f &emsp;强制略过fsck磁盘检测(unbuntu独有参数)</li>
<li>-F &emsp;强制进行fsck磁盘检测(unbuntu独有参数)</li>
<li>-w &emsp;测试使用，系统不会重启，但会把重新开机的数据写入/var/log目录下的wtmp记录文件</li>
<li>-H 或 --halt&emsp;&emsp;&emsp;相当于halt</li>
<li>-P 或 --poweroff&emsp;相当于poweroff</li>
<li>--no-wall &emsp;&emsp;&emsp;&emsp;系统在重启、关闭时不发送信息给登录的用户</li>
</ul>
<div class="show">示例：
# shutdown -t 30        30s后关机
# shutdown -h now       马上关机
# shutdown -h 12:30     12:30关机，会占用终端
# shutdown -h 12:30 &   12:30关机，关机命令会在后台处理不占用终端
# shutdown -h 10 "System will shutdown after 10 minutes"    10分钟后关机并发送消息给用户
# shutdown -r +10       10分钟后重启
# shutdown -fr now      马上重启并强制略过fsck磁盘检测
# shutdown -c           取消已设置的关机/重启命令
</div>

<h5 id="3-halt-关机"><a href="#3-halt-关机" class="headerlink" title="3.halt 关机"></a>3.halt 关机</h5><p><span class="strong">halt [选项]</span></p>
<p>可选选项</p>
<ul>
<li>-d &emsp;不把关机记录写到 /var/log/wtmp 文件里</li>
<li>-n &emsp;关机前不保存数据到硬盘(包括不把记录写到 /var/log/wtmp 文件里)</li>
<li>-w &emsp;不会真的关机,只是把关机记录写到 /var/log/wtmp 文件里</li>
<li>-f &emsp;强制关机，不调用shutdown命令</li>
<li>-i &emsp;关机前关闭所有网络接口</li>
<li>-p &emsp;关机后关闭电源(poweroff)</li>
</ul>
<h5 id="4-reboot-重启"><a href="#4-reboot-重启" class="headerlink" title="4.reboot 重启"></a>4.reboot 重启</h5><p><span class="strong">reboot [选项]</span></p>
<p>可选选项</p>
<ul>
<li>-d &emsp;不把重启记录写到 /var/log/wtmp 文件里</li>
<li>-n &emsp;重启前不保存数据到硬盘(包括不把记录写到 /var/log/wtmp 文件里)</li>
<li>-w &emsp;不会真的重启,只是把重启记录写到 /var/log/wtmp 文件里</li>
<li>-f &emsp;强制重启，不调用shutdown命令</li>
<li>-i &emsp;重启前关闭所有网络接口</li>
</ul>
<h5 id="5-poweroff-关机并切断电源"><a href="#5-poweroff-关机并切断电源" class="headerlink" title="5.poweroff 关机并切断电源"></a>5.poweroff 关机并切断电源</h5><p><span class="strong">poweroff [选项]</span></p>
<p>可选选项</p>
<ul>
<li>-d &emsp;不把关机记录写到 /var/log/wtmp 文件里</li>
<li>-n &emsp;关机前不保存数据到硬盘(包括不把记录写到 /var/log/wtmp 文件里)</li>
<li>-w &emsp;不会真的关机,只是把关闭记录写到 /var/log/wtmp 文件里</li>
<li>-f &emsp;强制关闭</li>
<li>-i &emsp;关机前关闭所有网络接口</li>
<li>-h &emsp;关机前将系统中所有的硬件设置为备用模式<div class="broadcast color-blue">
<div class="iconfont icon-yinhao"></div>
除了上述命令，还可以通过设置系统运行级别进行关机、重启。使用 <span class="tips">init 0 </span>关机，使用<span class="tips">init 6 </span>重启。
</div></li>
</ul>
<h3 id="用户与组管理"><a href="#用户与组管理" class="headerlink" title="用户与组管理"></a>用户与组管理</h3><p>Linux系统是一个多用户多任务的分时操作系统，用户可以属于一个或多个组方便系统管理员控制用户权限，默认有一个root管理员组并且root账户属于该组。可以使用<span class="tips">logout</span>登出当前用户账户。</p>
<h4 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h4><h5 id="1-添加用户"><a href="#1-添加用户" class="headerlink" title="1. 添加用户"></a>1. 添加用户</h5><p><span class="strong">useradd [可选参数] 用户名</span></p>
<p>默认会在/home 目录下生成一个以用户名命名的文件夹作为用户的主文件夹，并且会生成一个与用户名同名的用户组。</p>
可选参数：

<ul>
<li>-c 注释 &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;为用户添加一段注释性描述</li>
<li>-d /路径/目录名&emsp;&emsp;&emsp;自定义用户的主目录，即不使用与用户名同名的默认目录,如果该目录不存在，则可以同时使用-m参数来新建文件夹指定为主目录</li>
<li>-g 用户组 &emsp;&emsp;&emsp;&emsp;&emsp;指定用户所属的初始用户组</li>
<li>-G 用户组，用户组 &emsp;指定用户所属的附加用户组</li>
<li>-s Shell文件 &emsp;&emsp;&emsp;&emsp;指定用户的登录Shell</li>
<li>-u 用户号 &emsp;&emsp;&emsp;&emsp;&emsp;指定用户的用户号，可以添加-o选项来重复使用与其他用户相同的标识号<div class="show">示例：
# useradd yg
新增用户yg，同时会新建一个组yg
# useradd -g gumu lmc
新增用户lmc，并且将lmc添加到gumu组
# useradd -d /somedir/user2dir -m user2
新建用户user2，在 /somedir 文件夹下新建user2dir并将其主目录指定为user2dir (somedir文件夹必须存在，无法用上述命令直接新建)
</div></li>
</ul>
<h5 id="2-给用户添加-修改密码"><a href="#2-给用户添加-修改密码" class="headerlink" title="2. 给用户添加/修改密码"></a>2. 给用户添加/修改密码</h5><p><span class="strong">passwd [可选参数] [用户名]</span><br>不写用户名则会修改当前账户密码，输入密码时不会显示在终端上,可选参数：</p>
<ul>
<li>-l &emsp;锁定口令，禁止用户自行修改(参数为小写L)</li>
<li>-u &emsp;解锁口令，允许用户自行修改</li>
<li>-S &emsp;显示密码信息</li>
<li>-d &emsp;删除账户口令</li>
<li>-f &emsp;强迫用户下次登录时必须修改口令</li>
<li>-x &emsp;指定口令最长存活期</li>
<li>-k &emsp;    保留即将过期的用户在期满后能仍能使用</li>
</ul>
<h5 id="3-删除用户"><a href="#3-删除用户" class="headerlink" title="3. 删除用户"></a>3. 删除用户</h5><p>只能在root账户下删除用户</p>
<ul>
<li><span class="strong">userdel 用户名</span>&emsp;删除用户但保留用户的主目录</li>
<li> <span class="strong">userdel -r 用户名</span>&emsp;删除用户且不保留用户主目录</li>
</ul>
<h5 id="4-查询用户信息"><a href="#4-查询用户信息" class="headerlink" title="4. 查询用户信息"></a>4. 查询用户信息</h5><p><span class="strong">id 用户名</span><br>查询是否有该用户，有则返回用户号(uid)、组号(gid)、所属组名</p>
<h5 id="5-切换用户"><a href="#5-切换用户" class="headerlink" title="5. 切换用户"></a>5. 切换用户</h5><p><span class="strong">su [可选参数] 用户名</span><br>从权限高的账户切换到权限低的用户不需要输入密码，反之需要。切换完用户后，可通过 <span class="tips">exit</span> 命令返回原来的用户</p>
<ul>
<li>-&emsp; 使用”-“在切换用户时会连带切换用户环境，如:家目录，用户邮箱等</li>
<li>-c 命令 &emsp;仅切换到该用户执行一次-c后的命令<div class="broadcast color-red">
<div class="iconfont icon-gantanhao"></div>
仅使用 <span class="tips">su 用户名</span> 不会切换用户环境，在很多使用场景中会报错，推荐使用<span class="tips">su - 用户名</span>命令</div></li>
</ul>
<h5 id="6-修改用户信息"><a href="#6-修改用户信息" class="headerlink" title="6. 修改用户信息"></a>6. 修改用户信息</h5><p><span class="strong">usermod [可选参数] 用户名</span></p>
<ul>
<li>-u UID &emsp;修改用户UID</li>
<li>-c 用户说明 &emsp;修改用户说明信息</li>
<li>-G 组名 &emsp; 修改用户附加组</li>
<li>-L &emsp;&emsp;临时锁定用户</li>
<li>-U &emsp;&emsp;解锁用户</li>
</ul>
<h5 id="7-修改用户密码状态"><a href="#7-修改用户密码状态" class="headerlink" title="7. 修改用户密码状态"></a>7. 修改用户密码状态</h5><p><span class="strong">chage [可选参数] 用户名</span></p>
<ul>
<li>-l  &emsp;&emsp;列出用户详细密码状态</li>
<li>-d 日期 &emsp;修改密码最后一次修改日期(修改shadow文件字段3)</li>
<li>-m 天数 &emsp; 两次密码修改间隔(字段4)</li>
<li>-M 天数 &emsp;&emsp;密码有效期(字段5)</li>
<li>-W 天数 &emsp;&emsp;密码过期前警告天数(字段6)</li>
<li>-I 天数 &emsp;&emsp;密码过期后宽限天数(字段7)</li>
<li>-E 日期 &emsp;&emsp;账号失效时间(字段8)<div class="show">使用：
# chage -d 0 user1
强制用户user1下次登录修改密码
</div></li>
</ul>
<h5 id="8-查看当前所有登录用户"><a href="#8-查看当前所有登录用户" class="headerlink" title="8. 查看当前所有登录用户"></a>8. 查看当前所有登录用户</h5><h6 id="8-1-查看当前使用的账户"><a href="#8-1-查看当前使用的账户" class="headerlink" title="8.1 查看当前使用的账户"></a>8.1 查看当前使用的账户</h6><p><span class="strong">whoami 或 who am i</span></p>
<h6 id="8-2-查看当前登录的用户"><a href="#8-2-查看当前登录的用户" class="headerlink" title="8.2 查看当前登录的用户"></a>8.2 查看当前登录的用户</h6><p><span class="strong">who</span></p>
<p>会返回登录用户名、登录终端、登陆时间(远程登录还有IP地址)，登录终端中tty表示本地登录终端，pts一般为远程登录。</p>

<p> <span class="strong">w</span></p>
<p>会返回更详细的登录信息。</p>
<div class="show">w命令返回值解析：
15:20:10 up 25 days, 15:25,  1 user,  load average: 0.00, 0.00, 0.00
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
root     pts/0    180.129.129.129  10:09    0.00s  0.04s  0.04s -bash
第一行为登录时间，up后为linux运行时间，用户数量，服务器负载情况
第二行IDLE为用户已经空闲时间，JCPU为用户累计CPU占用时间，PCPU为用户当前命令操作占用CPU时间，WHAT为用户操作
</div>

<h4 id="用户的相关文件"><a href="#用户的相关文件" class="headerlink" title="用户的相关文件"></a>用户的相关文件</h4><p>Linux通过用户配置文件来查看和修改用户信息</p>
<h5 id="1-用户的信息文件"><a href="#1-用户的信息文件" class="headerlink" title="1. 用户的信息文件"></a>1. 用户的信息文件</h5><p>文件位于<span class="tips">/etc/passwd</span>，每一行代表一个用户，并且以</p>
<div class="show"><span class="tips">用户名:密码标识:用户UID:用户初始组GID:用户说明:家目录:登录的Shell</span></div>
格式书写用户信息

<ul>
<li><p>密码标识中，有 X 表示用户有密码，用户登录时linux会前往/etc/shadow查找密码</p>
</li>
<li><p>用户UID：0 为超级管理员用户，1-1000为系统用户，系统用户为ftp等由linux调用的用户，无法登录，修改可能会导致系统无法启动，1000以上为普通用户(旧版本的linux可能1-500为系统用户)</p>
</li>
<li><p>用户说明可以为空</p>
</li>
<li><p>用户登录shell一般默认为/bin/bash，系统用户为/sbin/nologin,可以将普通用户的shell更改为/sbin/nologin来禁止用户登录</p>
<h4 id="2-用户的密码文件"><a href="#2-用户的密码文件" class="headerlink" title="2. 用户的密码文件"></a>2. 用户的密码文件</h4><p>文件位于<span class="tips">/etc/shadow</span>，保存了加密后的用户密码等信息，每一行代表一个用户，如：</p>
<div class="show">swv:$6$hPQczrTV$urGtx/wXaOtfIKdyuD/aUO.tHogxBM7uie4ioSbyVgcpNS3Po.:19032:0:99999:7:::</div></li>
<li><p>字段一：用户名</p>
</li>
<li><p>字段二：加密后的密码，如果为”!!”或”*”表示没有密码，无法登录</p>
</li>
<li><p>字段三：密码最后一次修改日期，以1970年1月1日作为标准时间，每天+1</p>
</li>
<li><p>字段四：允许的两次密码修改间隔，如：10为只允许每10天修改一次密码</p>
</li>
<li><p>字段五：密码有效期</p>
</li>
<li><p>字段六：密码到期提前警告时间</p>
</li>
<li><p>字段七：密码到期后仍然可使用时间，如：3为还可以使用3天，其中0代表到期立马失效，-1代表到期后仍然能永久使用</p>
</li>
<li><p>字段八：账号失效时间，使用时间戳(到期时间与1970-1-1的间隔天数)表示</p>
</li>
<li><p>字段九：保留字段(未使用)</p>
</li>
</ul>
<h4 id="3-用户的邮箱文件"><a href="#3-用户的邮箱文件" class="headerlink" title="3. 用户的邮箱文件"></a>3. 用户的邮箱文件</h4><p>文件位于<span class="tips">/var/spool/mail/用户名/</span>，Linux用户可以相互发送内部邮件</p>
<h4 id="4-用户模板目录"><a href="#4-用户模板目录" class="headerlink" title="4. 用户模板目录"></a>4. 用户模板目录</h4><p>文件位于<span class="tips">/etc/skel/</span>，用于制作一个模板文件，在新注册用户时会在用户家目录下自动生成该文件。如：给每个账户生成一个用户操作手册。</p>
<h4 id="用户组管理"><a href="#用户组管理" class="headerlink" title="用户组管理"></a>用户组管理</h4><p>用户组方便系统对同一类型的用户进行管理，对用户组的修改实际上就是对/etc/group文件的更新。</p>
<h5 id="1-增加组"><a href="#1-增加组" class="headerlink" title="1. 增加组"></a>1. 增加组</h5><p><span class="strong">groupadd [可选参数] 组名</span><br>可选参数：</p>
<ul>
<li>-g GID &emsp;指定新用户组的组标识号（GID）</li>
<li>-o &emsp;&emsp;&emsp;一般与-g参数同时使用，表示新用户组的GID可以与系统已有用户组的GID相同。</li>
</ul>
<h5 id="2-修改用户组"><a href="#2-修改用户组" class="headerlink" title="2.修改用户组"></a>2.修改用户组</h5><p><span class="strong">groupmod [可选参数] 组名</sapn></p>
<ul>
<li>-g GID &emsp;修改组ID</li>
<li>-n 新组名&emsp;修改组名</li>
</ul>
<h5 id="3-删除用户组"><a href="#3-删除用户组" class="headerlink" title="3. 删除用户组"></a>3. 删除用户组</h5><p><span class="strong">groupdel 组名</span><br>如果组中有初始用户，该组无法删除(以避免用户不属于任何一个组，想删除该组可以先删除该初始用户的账户)，若组中都为附加用户则可以删除。</p>
<h5 id="4-把用户添加入组或从组中删除"><a href="#4-把用户添加入组或从组中删除" class="headerlink" title="4. 把用户添加入组或从组中删除"></a>4. 把用户添加入组或从组中删除</h5><p><span class="strong">gpasswd 必选参数 组名</sapn></p>
<ul>
<li>-a 用户名&emsp;把用户加入组中</li>
<li>-d 用户名&emsp;把用户从组中删除</li>
</ul>
<h4 id="用户组的配置文件"><a href="#用户组的配置文件" class="headerlink" title="用户组的配置文件"></a>用户组的配置文件</h4><h5 id="1-用户组的信息文件"><a href="#1-用户组的信息文件" class="headerlink" title="1. 用户组的信息文件"></a>1. 用户组的信息文件</h5><p>组信息文件位于<span class="tips">/etc/group</span>，信息格式为：</p>
<div class="show"><span class="tips">组名:组密码标识:组GID:组中的附加用户</span></div>
字段说明同用户配置文件类似

<h5 id="2-组密码文件"><a href="#2-组密码文件" class="headerlink" title="2. 组密码文件"></a>2. 组密码文件</h5><p>文件位于<span class="tips">/etc/gshadow</span>，密码文件书写格式为：</p>
<div class="show"><span class="tips">组名:组密码:组管理员用户名:组中的附加用户</span></div>
配置如上,该文件不常用



        </div>
    </div>
    <div class="post-nav">
        
            <div class="post-prev ">
                <a href="/blog/2022/01/20/Linux%E6%9C%8D%E5%8A%A1%E4%B8%8E%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/">上一篇：Linux服务与系统资源管理</a>
            </div>
            
            
                <div class="post-next">
                    <a href="/blog/2021/06/15/vim%E7%BC%96%E8%BE%91%E5%99%A8/">下一篇：vim笔记 </a>
                </div>
                 
    </div>
    <div class="container">
        <!--设计来源于B站-季夏小贞-->
        <div class="bigHead"></div>
        <div class="ears"></div>
        <div class="body"></div>
        <div class="paws-front"></div>
        <div class="paws-back"></div>
        <div class="details"></div>
        <div class="tail"></div>
        <div class="sleep">
          <span class="s1">z</span>
          <span class="s2">z</span>
          <span class="s3">z</span>
          <span class="s4">z</span>
          <span class="s5">z</span>
        </div>
    </div>
</div>
<div class="left-menu">
    <a class="iconfont backTop" href="javascript:">&#xe655;</a>
    <div class="husky"></div>
  </div>
</div>

<script src="/blog/js/jquery.min.js"></script>
<script src="/blog/js/jquery.bumpytext.js"></script>
<script src="/blog/js/grain.min.js"></script>
<script src="/blog/js/main.js"></script>


    <script>
        if(!viewH){
            let viewH=document.documentElement.clientHeight;
        }
    // 懒加载
    let imgs=document.querySelector('.art_content').querySelectorAll('img');
    if(imgs){
    let lazyload=function(){
    imgs.forEach((item,index)=>{
        let rect=item.getBoundingClientRect();
        if(rect.bottom>=0&&rect.top<viewH){
            item.src=item.dataset.src;
        }
    })
    };
    document.querySelector('.second-main').addEventListener('scroll',()=>{
        lazyload();
    })
}
    </script>
</body>




</html>